{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///./scripts/export/utils/checkResponse.js","webpack:///./scripts/export/api.js","webpack:///./scripts/export/card.js","webpack:///./scripts/export/modal.js","webpack:///./scripts/export/validation.js","webpack:///./scripts/index.js"],"sourcesContent":["export function checkResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n","import { checkResponse } from \"./utils/checkResponse.js\";\r\n\r\nexport const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-35\",\r\n  headers: {\r\n    authorization: \"7d3479a9-b3a4-4ebe-9dbb-b115b05a7b60\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nexport const selfProfile = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"GET\",\r\n    headers: config.headers,\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const editSelfProfile = (nameInput, jobInput) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: nameInput,\r\n      about: jobInput,\r\n    }),\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const updateImageProfile = (avatarProfile) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: avatarProfile,\r\n    }),\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"GET\",\r\n    headers: config.headers,\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const postOwnCard = (newCard) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify(newCard),\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const deleteOwnCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const putLike = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: \"PUT\",\r\n    headers: config.headers,\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const deleteLike = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then(checkResponse);\r\n};\r\n","import { deleteOwnCard, putLike, deleteLike } from \"./api.js\";\r\n\r\n//Функция создания карточки\r\nexport function createCard(\r\n  card,\r\n  imageFullScreen,\r\n  likeCard,\r\n  userId,\r\n  removeCard\r\n) {\r\n  const cardTemplate = document.querySelector(\"#card-template\").content;\r\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\r\n  const cardImage = cardElement.querySelector(\".card__image\");\r\n  const cardName = cardElement.querySelector(\".card__title\");\r\n  const cardLikeButton = cardElement.querySelector(\".card__like-button\");\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const cardLikesCount = cardElement.querySelector(\".card__likes-count\");\r\n\r\n  cardImage.src = card.link;\r\n  cardImage.alt = card.name;\r\n  cardName.textContent = card.name;\r\n  cardLikesCount.textContent = card.likes.length;\r\n\r\n  const isLikedByMe = checkLike(card, userId);\r\n\r\n  if (isLikedByMe) {\r\n    cardLikeButton.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  cardLikeButton.addEventListener(\"click\", () => {\r\n    likeCard(cardLikeButton, card._id, cardLikesCount, userId);\r\n  });\r\n\r\n  if (card.owner._id == userId) {\r\n    deleteButton.addEventListener(\"click\", () => {\r\n      removeCard(deleteButton, card._id);\r\n    });\r\n  } else {\r\n    deleteButton.remove();\r\n  }\r\n\r\n  cardImage.addEventListener(\"click\", () => {\r\n    imageFullScreen(cardImage);\r\n  });\r\n\r\n  return cardElement;\r\n}\r\n\r\n//Проверка на наличие лайка\r\nfunction checkLike(card, userId) {\r\n  return card.likes.some((like) => like._id === userId);\r\n}\r\n\r\n//Функция удаления карточки\r\nexport function deleteCard(button, cardId) {\r\n  const closestCard = button.closest(\".card\");\r\n\r\n  deleteOwnCard(cardId)\r\n    .then(() => {\r\n      closestCard.remove();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\n//Функция \"лайка\" карточки\r\nexport function likeCard(likeButton, cardId, likesCount) {\r\n  const isLiked = likeButton.classList.contains(\"card__like-button_is-active\");\r\n\r\n  if (!isLiked) {\r\n    putLike(cardId)\r\n      .then((res) => {\r\n        likesCount.textContent = res.likes.length;\r\n        likeButton.classList.add(\"card__like-button_is-active\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  } else {\r\n    deleteLike(cardId)\r\n      .then((res) => {\r\n        likeButton.classList.remove(\"card__like-button_is-active\");\r\n        likesCount.textContent = res.likes.length;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n}\r\n","//Функция открытия попапа\r\nexport function openModal(popup) {\r\n  popup.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", setEscToCloseModal);\r\n}\r\n\r\n//Функция закрытия попапа\r\nexport function closeModal(popup) {\r\n  popup.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", setEscToCloseModal);\r\n}\r\n\r\n//Функция закрытия попапа при нажатии на ESC\r\nfunction setEscToCloseModal(evt) {\r\n  if (evt.key === \"Escape\") {\r\n   const popup = document.querySelector(\".popup_is-opened\");\r\n   if (popup) {\r\n      closeModal(popup);\r\n    }\r\n  }\r\n} \r\n\r\n//Функция закрытия попапа при клике по области\r\nexport function setClickOnOverlayToCloseModal(evt) {\r\n  if (evt.target.classList.contains(\"popup_is-opened\")) {\r\n    closeModal(evt.target);\r\n  }\r\n} \r\n","export function enableValidation(config) {\r\n  const formList = Array.from(document.querySelectorAll(config.formSelector));\r\n  const button = config.submitButtonSelector;\r\n  const inputClass = config.inputSelector;\r\n  const inputErrorClassVisible = config.inputErrorClass;\r\n  const errorClassVisible = config.errorClass;\r\n\r\n  formList.forEach((formElement) => {\r\n    formElement.addEventListener(\"submit\", function (evt) {\r\n      evt.preventDefault();\r\n    });\r\n    setEventListeners(\r\n      formElement,\r\n      button,\r\n      inputClass,\r\n      inputErrorClassVisible,\r\n      errorClassVisible\r\n    );\r\n  });\r\n}\r\n\r\nfunction setEventListeners(\r\n  formElement,\r\n  button,\r\n  inputClass,\r\n  inputErrorClassVisible,\r\n  errorClassVisible\r\n) {\r\n  const inputList = Array.from(formElement.querySelectorAll(`${inputClass}`));\r\n  const buttonElement = formElement.querySelector(button);\r\n  toggleButtonState(inputList, buttonElement);\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", function () {\r\n      checkInputValidity(\r\n        formElement,\r\n        inputElement,\r\n        inputErrorClassVisible,\r\n        errorClassVisible\r\n      );\r\n      toggleButtonState(inputList, buttonElement);\r\n    });\r\n  });\r\n}\r\n\r\nconst toggleButtonState = (inputList, buttonElement) => {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.disabled = true;\r\n  } else {\r\n    buttonElement.disabled = false;\r\n  }\r\n};\r\n\r\nfunction checkInputValidity(\r\n  formElement,\r\n  inputElement,\r\n  inputErrorClassVisible,\r\n  errorClassVisible\r\n) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  const errorMessage = inputElement.dataset.errorMessage;\r\n\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      inputElement,\r\n      inputErrorClassVisible,\r\n      errorElement,\r\n      errorClassVisible\r\n    );\r\n  } else {\r\n    hideInputError(\r\n      inputElement,\r\n      inputErrorClassVisible,\r\n      errorElement,\r\n      errorClassVisible\r\n    );\r\n  }\r\n}\r\n\r\nfunction showInputError(\r\n  inputElement,\r\n  inputErrorClassVisible,\r\n  errorElement,\r\n  errorClassVisible\r\n) {\r\n  inputElement.classList.add(`${inputErrorClassVisible}`);\r\n  errorElement.textContent = inputElement.validationMessage;\r\n  errorElement.classList.add(`${errorClassVisible}`);\r\n}\r\n\r\nfunction hideInputError(\r\n  inputElement,\r\n  inputErrorClassVisible,\r\n  errorElement,\r\n  errorClassVisible\r\n) {\r\n  inputElement.classList.remove(`${inputErrorClassVisible}`);\r\n  errorElement.textContent = \"\";\r\n  errorElement.classList.add(`${errorClassVisible}`);\r\n}\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\nexport function clearValidation(form, config) {\r\n  const formInputs = form.querySelectorAll(`${config.inputSelector}`);\r\n  const errorClass = config.errorClass;\r\n  const inputErrorClass = config.inputErrorClass;\r\n  const errorElements = form.querySelectorAll(\".popup__input-error\");\r\n  const submitButton = form.querySelector(`${config.submitButtonSelector}`);\r\n\r\n  formInputs.forEach((formInputElement) => {\r\n    formInputElement.classList.remove(inputErrorClass);\r\n    if (\r\n      formInputElement.length >= 1 &&\r\n      formInputElement.classList.contains(`${inputErrorClass}`)\r\n    ) {\r\n      formInputElement.value = \"\";\r\n      formInputElement.classList.remove(inputErrorClass);\r\n    } else {\r\n      formInputElement.classList.remove(inputErrorClass);\r\n    }\r\n  });\r\n\r\n  errorElements.forEach((errorElement) => {\r\n    errorElement.classList.remove(errorClass);\r\n    errorElement.textContent = \"\";\r\n  });\r\n\r\n  submitButton.disabled = true;\r\n}\r\n","import \"../pages/index.css\";\r\n\r\nimport { createCard, deleteCard, likeCard } from \"./export/card.js\";\r\nimport {\r\n  openModal,\r\n  closeModal,\r\n  setClickOnOverlayToCloseModal,\r\n} from \"./export/modal.js\";\r\nimport {\r\n  selfProfile,\r\n  editSelfProfile,\r\n  updateImageProfile,\r\n  postOwnCard,\r\n  getInitialCards,\r\n} from \"./export/api.js\";\r\nimport { enableValidation, clearValidation } from \"./export/validation.js\";\r\n\r\nconst placesContainer = document.querySelector(\".places__list\");\r\nconst editProfileButton = document.querySelector(\".profile__edit-button\");\r\nconst profilePopup = document.querySelector(\".popup_type_edit\");\r\nconst nameProfile = document.querySelector(\".profile__title\");\r\nconst jobProfile = document.querySelector(\".profile__description\");\r\nconst addCardButton = document.querySelector(\".profile__add-button\");\r\nconst editProfileForm = document.forms[\"edit-profile\"];\r\nconst nameInput = editProfileForm.elements.name;\r\nconst jobInput = editProfileForm.elements.description;\r\nconst editProfilePopupButton = editProfileForm.querySelector(\".popup__button\");\r\nconst newCardPopup = document.querySelector(\".popup_type_new-card\");\r\nconst addCardForm = document.forms[\"new-place\"];\r\nconst addCardPopupButton = addCardForm.querySelector(\".popup__button\");\r\nconst addCardNameInput = addCardForm.elements[\"place-name\"];\r\nconst addCardLinkInput = addCardForm.elements.link;\r\nconst allPopups = document.querySelectorAll(\".popup\");\r\nconst imgPopup = document.querySelector(\".popup_type_image\");\r\nconst image = imgPopup.querySelector(\".popup__image\");\r\nconst imageCaption = imgPopup.querySelector(\".popup__caption\");\r\nconst imageProfilePopup = document.querySelector(\".popup_type_profile-image\");\r\nconst imageProfileContainer = document.querySelector(\".profile__image\");\r\nconst imageProfile = document.querySelector(\".profile__update_image\");\r\nconst editProfileImageForm = document.forms[\"edit-image\"];\r\nconst imageProfilePopupButton =\r\n  editProfileImageForm.querySelector(\".popup__button\");\r\n\r\nconst defaultValueForSubmitButtons = \"Сохранить\";\r\nconst valueForLoadingSubmitButtons = \"Сохранение...\";\r\n\r\n//Настройки валидации форм\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\n//Вызов валидации\r\nenableValidation(validationConfig);\r\n\r\n//Запросы на сервер\r\nconst profileConfig = selfProfile();\r\nconst cardsConfig = getInitialCards();\r\n\r\n//Переменная для глобального хранения ID профиля\r\nlet myId;\r\n\r\n//Промисы запросов\r\nPromise.all([profileConfig, cardsConfig])\r\n  .then(([userData, cardsData]) => {\r\n    myId = userData._id;\r\n\r\n    nameProfile.textContent = userData.name;\r\n    jobProfile.textContent = userData.about;\r\n    imageProfile.src = userData.avatar;\r\n\r\n    const newInitialCards = cardsData;\r\n\r\n    newInitialCards.forEach((cardData) => {\r\n      const newCards = createCard(\r\n        cardData,\r\n        imagePopup,\r\n        likeCard,\r\n        myId,\r\n        deleteCard\r\n      );\r\n      placesContainer.append(newCards);\r\n    });\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n\r\n//Навешываем слушатель на крестик каждого попапа,\r\n//добавляем плавное открытие и закрытие окна,\r\n//добавляем закрытие по клику за пределами попапа\r\nallPopups.forEach((item) => {\r\n  item.classList.add(\"popup_is-animated\");\r\n  item.addEventListener(\"click\", function (evt) {\r\n    if (evt.target.classList.contains(\"popup__close\")) {\r\n      closeModal(item);\r\n    }\r\n  });\r\n  item.addEventListener(\"mousedown\", setClickOnOverlayToCloseModal);\r\n});\r\n\r\n//Слушатель кнопки для редактирование профиля\r\neditProfileButton.addEventListener(\"click\", () => {\r\n  const nameProfileContent = nameProfile.textContent;\r\n  const jobProfileContent = jobProfile.textContent;\r\n\r\n  nameInput.placeholder = nameProfileContent;\r\n  jobInput.placeholder = jobProfileContent;\r\n\r\n  openModal(profilePopup);\r\n  clearValidation(editProfileForm, validationConfig);\r\n  editProfileForm.reset();\r\n});\r\n\r\n//Слушатель кнопки для добавление карточки\r\naddCardButton.addEventListener(\"click\", () => {\r\n  openModal(newCardPopup);\r\n  clearValidation(addCardForm, validationConfig);\r\n});\r\n\r\n//Слушатель для обновления аватара пользователя\r\nimageProfileContainer.addEventListener(\"click\", () => {\r\n  openModal(imageProfilePopup);\r\n  clearValidation(editProfileImageForm, validationConfig);\r\n});\r\n\r\n//Функция отправки формы для обновления аватара пользователя\r\nfunction handleProfileImageFormSubmit(evt) {\r\n  const imageLinkInput = editProfileImageForm.elements[\"link\"].value;\r\n  const avatarProfile = imageLinkInput;\r\n\r\n  evt.preventDefault();\r\n\r\n  contentLoading(true, imageProfilePopupButton, valueForLoadingSubmitButtons);\r\n\r\n  updateImageProfile(avatarProfile)\r\n    .then((res) => {\r\n      res.avatar = avatarProfile;\r\n      imageProfile.src = res.avatar;\r\n      closeModal(imageProfilePopup);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      contentLoading(false, imageProfilePopupButton);\r\n    });\r\n\r\n  editProfileImageForm.reset();\r\n}\r\n\r\n//Функция для реализации попапа картинки\r\nfunction imagePopup(item) {\r\n  image.src = item.src;\r\n  image.alt = item.alt;\r\n  imageCaption.textContent = item.alt;\r\n\r\n  openModal(imgPopup);\r\n}\r\n\r\n//Функция отправки формы редактирования профиля\r\nfunction handleProfileFormSumbit(evt) {\r\n  evt.preventDefault();\r\n\r\n  contentLoading(true, editProfilePopupButton, valueForLoadingSubmitButtons);\r\n\r\n  nameProfile.textContent = nameInput.value;\r\n  jobProfile.textContent = jobInput.value;\r\n\r\n  editSelfProfile(nameProfile.textContent, jobProfile.textContent)\r\n    .then((res) => {\r\n      res.name = nameProfile.textContent;\r\n      res.about = jobProfile.textContent;\r\n      closeModal(profilePopup);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      contentLoading(false, editProfilePopupButton);\r\n    });\r\n}\r\n\r\n//Функция отправки формы добавления карточки\r\nfunction handleCardFormSubmit(evt) {\r\n  const nameCardInput = addCardNameInput.value;\r\n  const linkCardInput = addCardLinkInput.value;\r\n\r\n  const newCard = {\r\n    name: nameCardInput,\r\n    link: linkCardInput,\r\n  };\r\n\r\n  evt.preventDefault();\r\n\r\n  contentLoading(true, addCardPopupButton, valueForLoadingSubmitButtons);\r\n\r\n  postOwnCard(newCard)\r\n    .then((res) => {\r\n      placesContainer.prepend(\r\n        createCard(res, imagePopup, likeCard, myId, deleteCard)\r\n      );\r\n      closeModal(newCardPopup);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      contentLoading(false, addCardPopupButton);\r\n    });\r\n  addCardForm.reset();\r\n}\r\n\r\n//Функция изменения значения кнопки при загрузке контента\r\nfunction contentLoading(isLoading, button, buttonText) {\r\n  if (isLoading) {\r\n    button.textContent = buttonText;\r\n  } else {\r\n    button.textContent = defaultValueForSubmitButtons;\r\n  }\r\n}\r\n\r\n//Навешивание слушателя на форму редактирования профиля\r\neditProfileForm.addEventListener(\"submit\", handleProfileFormSumbit);\r\n\r\n//Навешивание слушателя на форму добавления карточки\r\naddCardForm.addEventListener(\"submit\", handleCardFormSubmit);\r\n\r\n//Навешивания слушателя на форму обновления аватара профиля\r\neditProfileImageForm.addEventListener(\"submit\", handleProfileImageFormSubmit);\r\n"],"names":["checkResponse","res","ok","json","Promise","reject","concat","status","config","baseUrl","headers","authorization","createCard","card","imageFullScreen","likeCard","userId","removeCard","cardElement","document","querySelector","content","cloneNode","cardImage","cardName","cardLikeButton","deleteButton","cardLikesCount","src","link","alt","name","textContent","likes","length","isLikedByMe","some","like","_id","checkLike","classList","add","addEventListener","owner","remove","deleteCard","button","cardId","closestCard","closest","fetch","method","then","deleteOwnCard","catch","err","console","log","likeButton","likesCount","contains","deleteLike","putLike","openModal","popup","setEscToCloseModal","closeModal","removeEventListener","evt","key","setClickOnOverlayToCloseModal","target","toggleButtonState","inputList","buttonElement","hasInvalidInput","disabled","inputElement","validity","valid","clearValidation","form","formInputs","querySelectorAll","inputSelector","errorClass","inputErrorClass","errorElements","submitButton","submitButtonSelector","forEach","formInputElement","value","errorElement","placesContainer","editProfileButton","profilePopup","nameProfile","jobProfile","addCardButton","editProfileForm","forms","nameInput","elements","jobInput","description","editProfilePopupButton","newCardPopup","addCardForm","addCardPopupButton","addCardNameInput","addCardLinkInput","allPopups","imgPopup","image","imageCaption","imageProfilePopup","imageProfileContainer","imageProfile","editProfileImageForm","imageProfilePopupButton","valueForLoadingSubmitButtons","validationConfig","formSelector","inactiveButtonClass","formList","Array","from","inputClass","inputErrorClassVisible","errorClassVisible","formElement","preventDefault","id","errorMessage","dataset","patternMismatch","setCustomValidity","hideInputError","validationMessage","showInputError","checkInputValidity","setEventListeners","enableValidation","myId","profileConfig","cardsConfig","imagePopup","item","contentLoading","isLoading","buttonText","all","_ref","_ref2","userData","cardsData","about","avatar","cardData","newCards","append","nameProfileContent","jobProfileContent","placeholder","reset","body","JSON","stringify","editSelfProfile","finally","newCard","postOwnCard","prepend","avatarProfile","updateImageProfile"],"sourceRoot":""}